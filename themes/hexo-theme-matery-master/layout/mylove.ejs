<% if (theme.verifyPassword.enable) { %>
	<script src="<%- theme.libs.js.crypto %>"></script>
	<script>
		(function() {
			let pwd = '<%- page.password %>';
			if (pwd && pwd.length > 0) {
				if (pwd !== CryptoJS.SHA256(prompt('<%- theme.verifyPassword.promptMessage %>')).toString(CryptoJS.enc.Hex)) {
					alert('<%- theme.verifyPassword.errorMessage %>');
					location.href = '<%- url_for("/")  %>';
				}
			}
		})();
	</script>
<% } %>
	
<%- partial('_partial/bg-cover') %>
	
<main class="content">
	<style>
		* {
			cursor: pointer;
		}
	
		#div1 {
			text-align: center;
			padding: 1%;
			background-color: aliceblue;
			border: 1px solid lightblue;
			width: fit-content;
		}
	
		#div2{
			text-align: center;
			width: fit-content;
		}
		#div1:hover{
			box-shadow: 5px 5px 5px 5px rgba(187, 187, 187, 0.6);
			border-radius: 3%;
		}
	
		.loveName {
			color: red;
			font-weight: bold;
			font-size: 42px;
			height: 120px;
		}
	
		.lTime {
			margin: 0 auto;
			text-align: center;
			font-size: 25px;
			color: #0FCECE;
		}
	
		.digit {
			font-size:2em;
			color:#7e57c2;
		}
		.bcolor{
			color:#666666
		}
	</style>
	<script type="text/javascript" src="https://cdn.staticfile.org/jquery/1.12.4/jquery.min.js"></script>
	<script>
		$(function() {
	
			var setInterval1 = setInterval(function() {
				dateDiff("2019/11/24 0:0:0");
				dateDiff2("2019/11/24 0:0:0");
				// console.log(formartDate(nTime));
				// console.log("时间差：" + dTime);
			}, 1000)
	
			function dateDiff(sTime) {
				let nTime = new Date();
				if (sTime == null || sTime == "") {
					sTime = "2019/11/24 0:0:0";
				}
				let day1 = new Date(sTime).getTime();
				let iDays = (nTime.getTime() - day1) / (1000 * 60 * 60 * 24); //天数
				let iHours = (nTime.getTime() - day1) / (1000 * 60 * 60); //小时数
				let iMinutes = (nTime.getTime() - day1) / (1000 * 60); //分钟数
				$("#sTime").html("开始时间: " + "2019-11-24 00:00:00" + "  ");
				$("#nTime").html("当前时间: " + formartDate(nTime) + "  ");
				$("#dDays").html("相爱天数: " + iDays.toFixed(13) + "天");
				$("#dHour").html("相爱小时: " + iHours.toFixed(10) + "小时");
				$("#dMinutes").html("相爱分钟: " + iMinutes.toFixed(8) + "分钟");
				// return iHours
			};
	
			/*格式化时间  */
			function formartDate(mTime) {
				var mYear = mTime.getFullYear();
				var mMonth = mTime.getMonth() + 1;
				var mDate = mTime.getDate();
				var mHours = mTime.getHours();
				var mMinutes = mTime.getMinutes();
				var mSeconds = mTime.getSeconds();
				if (mMinutes < 10) {
					mMinutes = "0" + mMinutes
				}
				if (mSeconds < 10) {
					mSeconds = "0" + mSeconds
				}
				if (mMonth < 10) {
					mMonth = "0" + mMonth
				}
				if (mDate < 10) {
					mDate = "0" + mDate
				}
				return mYear + "-" + mMonth + "-" + mDate + "  " + mHours + ":" + mMinutes + ":" + mSeconds;
			}
	
			/* 计算时间 */
			function dateDiff2(sTime) {
				var current = Date();
				var seconds = (Date.parse(current) - Date.parse(sTime)) / 1000;
				var days = Math.floor(seconds / (3600 * 24));
				seconds = seconds % (3600 * 24);
				var hours = Math.floor(seconds / 3600);
				if (hours < 10) {
					hours = "0" + hours;
				}
				seconds = seconds % 3600;
				var minutes = Math.floor(seconds / 60);
				if (minutes < 10) {
					minutes = "0" + minutes;
				}
				seconds = seconds % 60;
				if (seconds < 10) {
					seconds = "0" + seconds;
				}
				var result = "<span class=\"digit\">" + days + "</span> 天 <span class=\"digit\">" + hours +
					"</span> 小时 <span class=\"digit\">" + minutes + "</span> 分钟 <span class=\"digit\">" + seconds + "</span> 秒";
				$("#dDays2").html(result);
			}
	
	
		})
	</script>
	
	<div class="container">
		<!-- 倒计时 -->
		<div class="row">
			<br><br><br><br>
			<div class="col s12 m1 14">&nbsp</div>
			<div id="div1" class="col s12 m4 14">
				<div class="loveName">
					<%= page.name1%>❤
					<%= page.name2%>
				</div>
				<div id="loveTime" class="loveTime">
					<div id="sTime" class="lTime">数据初始化中..</div><br />
					<div id="nTime" class="lTime">请稍等..</div><br />
					<div id="dDays" class="lTime"></div><br />
					<div id="dHour" class="lTime"></div><br />
					<div id="dMinutes" class="lTime"></div><br />
				</div>
			</div>&nbsp
			<div id="div2" class="col s12 m6 14">
				<br><br><br><br>
				<div>
					<div class="lTime bcolor" ><span style="color:#33CC00">截至今天我们已经</span>&nbsp 默默走过了</div><br />
					<div id="dDays2" class="lTime bcolor">数据初始化中..</div>
					<hr style="border-top: 1px solid rosybrown;"/>
				</div>
				<div class="div2title">
					<div class="lTime bcolor">往后余生，请多多指教！</div>
				</div>
			</div>
		</div>
		
		<%
		// the gallery photos of theme _config.yml.
		let galleries = [];
		if (site.data && site.data.myloveImg) {
		    galleries = site.data.myloveImg;
		}
		var photos = galleries[0].photos;
		%>
		
		<hr>
		<div id="myGallery" class="my-gallery">
		    <div class="title center-align" data-aos="zoom-in-up">
		        <i class="fa fa-heart"></i>&nbsp;&nbsp;<span>爱情回忆</span>
		    </div>
		    <div class="row">
		        <% for (var i = 0, len =photos.length; i < len; i++) { %>
					<div class="photo col s12 m6 l4" data-aos="fade-up">
						<div class="img-item" data-src="<%- photos[i] %>">
							<img src="<%- photos[i] %>" class="responsive-img">
						</div>
					</div>
		        <% } %>
		    </div>
		</div>
		
		<script>
		    $(function () {
		        let animateClass = 'animated pulse';
		        $('#myGallery .photo').hover(function () {
		            $(this).addClass(animateClass);
		        }, function () {
		            $(this).removeClass(animateClass);
		        });
		    });
		</script>
	</div>
	<br><br><br><br><br>
</main>
	
